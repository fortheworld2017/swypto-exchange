// Generated by CoffeeScript 1.9.3
(function() {
  var bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  window.App || (window.App = {});

  App.ErrorLogger = (function() {
    function ErrorLogger() {
      this.renderNotice = bind(this.renderNotice, this);
      this.renderError = bind(this.renderError, this);
      $.subscribe("error", this.renderError);
      $.subscribe("notice", this.renderNotice);
    }

    ErrorLogger.prototype.renderError = function(ev, xhrError, $form) {
      var e, error;
      if (xhrError == null) {
        xhrError = {};
      }
      if (xhrError.responseText) {
        try {
          error = $.parseJSON(xhrError.responseText);
          error = error.error;
        } catch (_error) {
          e = _error;
          error = xhrError.responseText;
        }
      } else {
        error = xhrError.error || xhrError;
      }
      if ($form) {
        return $form.find("#error-cnt").text(error);
      }
      return $.jGrowl(error, {
        position: "top-right",
        theme: "error"
      });
    };

    ErrorLogger.prototype.renderNotice = function(ev, msg) {
      return $.jGrowl(msg, {
        position: "top-right",
        theme: "notice"
      });
    };

    return ErrorLogger;

  })();

}).call(this);
